{% extends "shop/base.html" %}
{% block content %}
<style>
body {
  background: linear-gradient(135deg, #f3f6fa 0%, #e9eef5 100%);
  min-height: 100vh;
  font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
}

.auth-card {
  background: #fff;
  border-radius: 12px;
  box-shadow: 0 6px 18px rgba(0, 0, 0, 0.1);
  padding: 2rem;
  margin-top: 5rem;
  transition: all 0.3s ease-in-out;
}
.auth-card:hover {
  transform: translateY(-3px);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
}

.auth-card h2 {
  text-align: center;
  margin-bottom: 1.5rem;
  font-weight: 600;
  color: #333;
}

.auth-card .form-control {
  border-radius: 8px;
  padding: 0.6rem 0.8rem;
  border: 1px solid #ccd3db;
}
.auth-card .form-control:focus {
  border-color: #0d6efd;
  box-shadow: 0 0 0 0.15rem rgba(13, 110, 253, 0.25);
}

.auth-card .btn-primary {
  width: 100%;
  border-radius: 8px;
  padding: 0.6rem;
  font-size: 1rem;
  font-weight: 500;
  background: linear-gradient(90deg, #0d6efd, #3a8ef6);
  border: none;
}
.auth-card .btn-primary:hover {
  background: linear-gradient(90deg, #0056d2, #2a7ae4);
  transform: scale(1.02);
}

#loginMessage {
  text-align: center;
  font-weight: 500;
  color: #d9534f;
}
</style>

<div class="row justify-content-center">
  <div class="col-md-6">
    <div class="auth-card">
      <h2>Login</h2>
      <form id="loginForm">
        <div class="mb-3">
          <label class="form-label">Username</label>
          <input class="form-control" name="username" required>
        </div>
        <div class="mb-3">
          <label class="form-label">Password</label>
          <input type="password" class="form-control" name="password" required>
        </div>
        <button class="btn btn-primary" type="submit">Login</button>
        <div id="loginMessage" class="mt-3"></div>
      </form>
    </div>
  </div>
</div>

<script>
document.getElementById('loginForm').onsubmit = async (e) => {
  e.preventDefault();
  const f = e.target;
  const data = {
    username: f.username.value,
    password: f.password.value
  };
  const res = await fetch('/api/token/', {
    method:'POST',
    headers:{'Content-Type':'application/json'},
    body: JSON.stringify(data)
  });
  const json = await res.json();
  if (res.ok) {
    localStorage.setItem('access', json.access);
    localStorage.setItem('refresh', json.refresh);
    window.location.href = '/';
  } else {
    document.getElementById('loginMessage').innerText = json.detail || JSON.stringify(json);
  }
};
</script>
{% endblock %}
